# TalesWiki

<div align="center">
  <img src="client/public/og-image.png" alt="TalesWiki Logo" width="300"/>
  
  <h3>ğŸ® í…Œì¼ì¦ˆìœ„í‚¤ - ê²Œì„ ì»¤ë®¤ë‹ˆí‹° ìœ„í‚¤ í”Œë«í¼</h3>
  
  <p>
    <strong>ê²Œì„ ì»¤ë®¤ë‹ˆí‹°ë¥¼ ìœ„í•œ í˜‘ì—… ìœ„í‚¤ ì‹œìŠ¤í…œ</strong><br>
    ì‹¤ì‹œê°„ ì±„íŒ…, ë²„ì „ ê´€ë¦¬, ê³ ì„±ëŠ¥ ê²€ìƒ‰ì„ ì œê³µí•˜ëŠ” í’€ìŠ¤íƒ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜
  </p>

  <p>
    <a href="#-ì£¼ìš”-ê¸°ëŠ¥">ì£¼ìš” ê¸°ëŠ¥</a> â€¢
    <a href="#-ê¸°ìˆ -ìŠ¤íƒ">ê¸°ìˆ  ìŠ¤íƒ</a> â€¢
    <a href="#-ì‹œì‘í•˜ê¸°">ì‹œì‘í•˜ê¸°</a> â€¢
    <a href="#-í”„ë¡œì íŠ¸-êµ¬ì¡°">í”„ë¡œì íŠ¸ êµ¬ì¡°</a>
  </p>

  <p>
    <img src="https://img.shields.io/badge/React-19.0.0-61DAFB?style=flat-square&logo=react" alt="React">
    <img src="https://img.shields.io/badge/Spring%20Boot-3.4.5-6DB33F?style=flat-square&logo=springboot" alt="Spring Boot">
    <img src="https://img.shields.io/badge/Java-21-007396?style=flat-square&logo=java" alt="Java">
    <img src="https://img.shields.io/badge/MySQL-8.0-4479A1?style=flat-square&logo=mysql" alt="MySQL">
    <img src="https://img.shields.io/badge/Redis-6.0-DC382D?style=flat-square&logo=redis" alt="Redis">
    <img src="https://img.shields.io/badge/License-MIT-green.svg?style=flat-square" alt="License">
  </p>
</div>

## ğŸ“‹ ëª©ì°¨

- [ê°œìš”](#-ê°œìš”)
- [ì£¼ìš” ê¸°ëŠ¥](#-ì£¼ìš”-ê¸°ëŠ¥)
- [ê¸°ìˆ  ìŠ¤íƒ](#-ê¸°ìˆ -ìŠ¤íƒ)
- [ì•„í‚¤í…ì²˜](#-ì•„í‚¤í…ì²˜)
- [ì‹œì‘í•˜ê¸°](#-ì‹œì‘í•˜ê¸°)
- [í”„ë¡œì íŠ¸ êµ¬ì¡°](#-í”„ë¡œì íŠ¸-êµ¬ì¡°)
- [ëª¨ë‹ˆí„°ë§](#-ëª¨ë‹ˆí„°ë§)

## ğŸ¯ ê°œìš”

- í…Œì¼ì¦ˆìœ„í‚¤ëŠ” ê²Œì„ ì»¤ë®¤ë‹ˆí‹°ë¥¼ ìœ„í•œ í˜‘ì—… ìœ„í‚¤ í”Œë«í¼ì…ë‹ˆë‹¤.
- ì‚¬ìš©ìë“¤ì´ ìœ ì €ì™€ ê¸¸ë“œ ì •ë³´ë¥¼ ê³µìœ í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ê³µê°„ì„ ì œê³µí•©ë‹ˆë‹¤.

### í”„ë¡œì íŠ¸ ëª©í‘œ

- ğŸ¤ **ì»¤ë®¤ë‹ˆí‹° ì£¼ë„**: ëª¨ë“  ì‚¬ìš©ìê°€ ì½˜í…ì¸  ìƒì„± ë° í¸ì§‘ ê°€ëŠ¥
- ğŸ“š **ì •ë³´ ì²´ê³„í™”**: ìœ ì €ì™€ ê¸¸ë“œ ì •ë³´ë¥¼ ì²´ê³„ì ìœ¼ë¡œ ê´€ë¦¬
- ğŸ”„ **ë²„ì „ ê´€ë¦¬**: ëª¨ë“  ìˆ˜ì • ë‚´ì—­ ì¶”ì 
- ğŸ’¬ **ì‹¤ì‹œê°„ ì†Œí†µ**: WebSocket ê¸°ë°˜ ì‹¤ì‹œê°„ ì±„íŒ…
- ğŸ” **ê°•ë ¥í•œ ê²€ìƒ‰**: Elasticsearchë¥¼ í™œìš©í•œ ê³ ì„±ëŠ¥ ê²€ìƒ‰

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

### 1. ğŸ“– ìœ„í‚¤ ì‹œìŠ¤í…œ
- **ì¹´í…Œê³ ë¦¬ ê´€ë¦¬**: ëŸ°ë„ˆ, ê¸¸ë“œ ë¶„ë¥˜
- **ë²„ì „ ê´€ë¦¬**: ëª¨ë“  ìˆ˜ì • ì´ë ¥ ì¶”ì 
- **ë¦¬ì¹˜ í…ìŠ¤íŠ¸ ì—ë””í„°**: Toast UI Editor ê¸°ë°˜ WYSIWYG
- **ì´ë¯¸ì§€ ì—…ë¡œë“œ**: R2 ì €ì¥ì†Œ & WebP ìë™ ë³€í™˜

### 2. ğŸ” ê²€ìƒ‰ ì‹œìŠ¤í…œ
- **ì „ë¬¸ ê²€ìƒ‰**: Elasticsearch ê¸°ë°˜ í•œê¸€ ê²€ìƒ‰
- **ì´ˆì„± ê²€ìƒ‰**: ë¬¸ì„œ ì œëª© ê¸°ë°˜ ì´ˆì„± ê²€ìƒ‰
- **ì¸ê¸°/ëœë¤**: ì¡°íšŒìˆ˜ ê¸°ë°˜ ì¸ê¸° ì½˜í…ì¸ 

### 3. ğŸ’¬ ì‹¤ì‹œê°„ ì±„íŒ…
- **ìµëª… ì±„íŒ…**: ìë™ ìƒì„± ë‹‰ë„¤ì„
- **WebSocket**: STOMP í”„ë¡œí† ì½œ ê¸°ë°˜
- **ì±„íŒ… ê¸°ë¡**: ë©”ì‹œì§€ ì˜êµ¬ ë³´ì¡´
- **ì„¸ì…˜ ê´€ë¦¬**: ì„¸ì…˜ë³„ ì‚¬ìš©ì êµ¬ë¶„

### 4. ğŸ›¡ï¸ ê´€ë¦¬ ì‹œìŠ¤í…œ
- **ì½˜í…ì¸  ê´€ë¦¬**: ì‚¬ì „ ë¬¸ì„œ ì‚­ì œ/ì¡°íšŒ
- **ì‚¬ìš©ì ê´€ë¦¬**: IP ê¸°ë°˜ ì°¨ë‹¨ ì‹œìŠ¤í…œ
- **í†µê³„ ëŒ€ì‹œë³´ë“œ**: ì‚¬ìš© í†µê³„ ë° ë¡œê·¸
- **ë³´ì•ˆ**: ê´€ë¦¬ì ì¸ì¦ ë° ê¶Œí•œ ê´€ë¦¬

### 5. ğŸ“Š ëª¨ë‹ˆí„°ë§
- **ë©”íŠ¸ë¦­ ìˆ˜ì§‘**: Prometheus & Grafana
- **ë¡œê·¸ ê´€ë¦¬**: Promtail & Loki
- **í—¬ìŠ¤ ì²´í¬**: Spring Actuator
- **ì•Œë¦¼**: ì„ê³„ê°’ ê¸°ë°˜ ì•Œë¦¼

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

### Frontend
<p>
  <img src="https://img.shields.io/badge/React-19.0.0-61DAFB?style=for-the-badge&logo=react" alt="React">
  <img src="https://img.shields.io/badge/Vite-6.3.1-646CFF?style=for-the-badge&logo=vite" alt="Vite">
  <img src="https://img.shields.io/badge/TailwindCSS-4.1.5-06B6D4?style=for-the-badge&logo=tailwindcss" alt="TailwindCSS">
  <img src="https://img.shields.io/badge/TanStack_Query-5.75.2-FF4154?style=for-the-badge&logo=reactquery" alt="TanStack Query">
</p>

### Backend
<p>
  <img src="https://img.shields.io/badge/Java-21-007396?style=for-the-badge&logo=openjdk" alt="Java">
  <img src="https://img.shields.io/badge/Spring_Boot-3.4.5-6DB33F?style=for-the-badge&logo=springboot" alt="Spring Boot">
  <img src="https://img.shields.io/badge/Spring_Data_JPA-3.4.5-6DB33F?style=for-the-badge&logo=spring" alt="Spring Data JPA">
</p>

### Database & Storage
<p>
  <img src="https://img.shields.io/badge/MySQL-8.0-4479A1?style=for-the-badge&logo=mysql" alt="MySQL">
  <img src="https://img.shields.io/badge/Redis-6.0-DC382D?style=for-the-badge&logo=redis" alt="Redis">
  <img src="https://img.shields.io/badge/Elasticsearch-8.x-005571?style=for-the-badge&logo=elasticsearch" alt="Elasticsearch">
  <img src="https://img.shields.io/badge/Cloudflare-R2-569A31?style=for-the-badge&logo=cloudflare" alt="Cloudflare R2">
</p>

### DevOps & Monitoring
<p>
  <img src="https://img.shields.io/badge/Docker-24.0-2496ED?style=for-the-badge&logo=docker" alt="Docker">
  <img src="https://img.shields.io/badge/Prometheus-2.45-E6522C?style=for-the-badge&logo=prometheus" alt="Prometheus">
  <img src="https://img.shields.io/badge/Grafana-10.0-F46800?style=for-the-badge&logo=grafana" alt="Grafana">
  <img src="https://img.shields.io/badge/GitHub_Actions-2088FF?style=for-the-badge&logo=githubactions" alt="GitHub Actions">
</p>

## ğŸ— ì•„í‚¤í…ì²˜

### ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```mermaid
graph TB
    subgraph "Client"
        A[React SPA]
        B[Vite Dev Server]
    end

    subgraph "Cloudflare Network"
        C[Cloudflare Tunnel]
    end

    subgraph "Application Server"
        D[Spring Boot App]
        E[WebSocket Server]
    end

    subgraph "Data Layer"
        F[MySQL]
        G[Redis Cache]
        H[Elasticsearch]
    end

    subgraph "Storage"
        I[Cloudflare R2]
    end

    subgraph "Monitoring"
        J[Prometheus]
        K[Grafana]
        L[Promtail]
    end

    A --> C
    B --> C
    C --> D
    C --> E
    D --> F
    D --> G
    D --> H
    D --> I
    D --> J
    J --> K
    D --> L

```

### ì†Œí”„íŠ¸ì›¨ì–´ ì•„í‚¤í…ì²˜

í”„ë¡œì íŠ¸ëŠ” **Domain-Driven Design (DDD)** ì›ì¹™ì„ ë”°ë¥´ëŠ” **ë ˆì´ì–´ë“œ ì•„í‚¤í…ì²˜**ë¥¼ ì±„íƒí–ˆìŠµë‹ˆë‹¤:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Presentation Layer             â”‚  â† REST Controllers, WebSocket Handlers
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          Application Layer              â”‚  â† Use Cases, Transaction Management
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚            Domain Layer                 â”‚  â† Entities, Value Objects, Domain Services
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         Infrastructure Layer            â”‚  â† Repositories, External Services
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ ì‹œì‘í•˜ê¸°

### í•„ìˆ˜ ìš”êµ¬ì‚¬í•­

- **Node.js** 20.14.0 ì´ìƒ
- **Java** 21 ì´ìƒ
- **Docker** & Docker Compose
- **MySQL** 8.0 (Dockerë¡œ ì œê³µ)
- **Redis** 6.0 (Dockerë¡œ ì œê³µ)
- **Elasticsearch** 8.x (Dockerë¡œ ì œê³µ)

### ë¹ ë¥¸ ì‹œì‘

#### 1. ì €ì¥ì†Œ í´ë¡ 

```bash
git clone https://github.com/openmpy/taleswiki.git
cd taleswiki
```

#### 2. ë°±ì—”ë“œ ì‹¤í–‰

```bash
cd ./server

# ì¸í”„ë¼ ì‹¤í–‰ (MySQL, Redis, Elasticsearch)
docker-compose -f docker/compose-dev.yml up -d

# ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰
./gradlew bootRun
```

#### 3. í”„ë¡ íŠ¸ì—”ë“œ ì‹¤í–‰

```bash
cd ./client

# ì˜ì¡´ì„± ì„¤ì¹˜
npm install

# ê°œë°œ ì„œë²„ ì‹¤í–‰
npm run dev
```

#### 4. ì ‘ì†

- í”„ë¡ íŠ¸ì—”ë“œ: http://localhost:5173
- ë°±ì—”ë“œ API: http://localhost:8080
- API ë¬¸ì„œ: http://localhost:8080/docs/index.html

### í™˜ê²½ ì„¤ì •

#### ë°±ì—”ë“œ ì„¤ì • (`server/src/main/resources/application.yml`)

```yaml
server:
  port: 8080

spring:
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/taleswiki?serverTimezone=Asia/Seoul&characterEncoding=UTF-8
    username: username
    password: password
  jpa:
    database-platform: org.hibernate.dialect.MySQL8Dialect
    hibernate:
      ddl-auto: none
    properties:
      hibernate:
        default_batch_fetch_size: 100
    open-in-view: false
  servlet:
    multipart:
      max-file-size: 20MB
      max-request-size: 40MB
  data:
    redis:
      host: localhost
      port: 6379
      timeout: 5000

management:
  endpoints:
    web:
      exposure:
        include: "*"
  endpoint:
    health:
      show-details: always

cors:
  path-pattern: /**
  origins: origins
  methods: POST, GET, PUT, PATCH, DELETE, OPTIONS
  headers: "*"
  allow-credentials: true
  max-age: 3600

cookie:
  http-only: true
  secure: true
  domain: domain
  path: /
  same-site: none
  max-age: 7D

admin:
  nickname: nickname
  password: password
  token: success

image:
  upload-path: path

s3:
  endpoint: endpoint
  access-key: access-key
  secret-key: secret-key
  region: auto

```

#### í”„ë¡ íŠ¸ì—”ë“œ ì„¤ì • (`client/.env`)

```env
VITE_API_BASE_URL=http://localhost:8080
VITE_WS_URL=ws://localhost:8080/ws
```

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
taleswiki/
â”œâ”€â”€ client/                        # React í”„ë¡ íŠ¸ì—”ë“œ
â”‚   â”œâ”€â”€ public/                    # ì •ì  íŒŒì¼
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/            # ì¬ì‚¬ìš© ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ pages/                 # í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ layouts/               # ë ˆì´ì•„ì›ƒ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ utils/                 # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”‚   â”‚   â””â”€â”€ App.jsx                # ë£¨íŠ¸ ì»´í¬ë„ŒíŠ¸
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ server/                        # Spring Boot ë°±ì—”ë“œ
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â”‚   â”œâ”€â”€ java/.../
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ admin/         # ê´€ë¦¬ì ë„ë©”ì¸
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ chat/          # ì±„íŒ… ë„ë©”ì¸
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ common/        # ê³µí†µ ëª¨ë“ˆ
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ dictionary/    # ì‚¬ì „ ë„ë©”ì¸
â”‚   â”‚   â”‚   â””â”€â”€ resources/
â”‚   â”‚   â””â”€â”€ test/                  # í…ŒìŠ¤íŠ¸ ì½”ë“œ
â”‚   â”œâ”€â”€ docker/                    # Docker ì„¤ì •
â”‚   â”œâ”€â”€ monitoring/                # ëª¨ë‹ˆí„°ë§ ì„¤ì •
â”‚   â””â”€â”€ build.gradle
â”‚
â””â”€â”€ README.md
```

### ë„ë©”ì¸ë³„ íŒ¨í‚¤ì§€ êµ¬ì¡°

ê° ë„ë©”ì¸ì€ ë‹¤ìŒê³¼ ê°™ì€ êµ¬ì¡°ë¥¼ ë”°ë¦…ë‹ˆë‹¤:

```
domain/
â”œâ”€â”€ application/         # ì‘ìš© ì„œë¹„ìŠ¤
â”œâ”€â”€ domain/              # ë„ë©”ì¸ ëª¨ë¸ (Entities, VOs)
â”‚   â”œâ”€â”€ entity/          # JPA ì—”í‹°í‹°
â”‚   â””â”€â”€ repository/      # ë¦¬í¬ì§€í† ë¦¬ ì¸í„°í˜ì´ìŠ¤
â”œâ”€â”€ dto/                 # ë°ì´í„° ì „ì†¡ ê°ì²´
â”‚   â”œâ”€â”€ request/         # ìš”ì²­ DTO
â”‚   â””â”€â”€ response/        # ì‘ë‹µ DTO
â””â”€â”€ presentation/        # ì»¨íŠ¸ë¡¤ëŸ¬
```

## ğŸŒ API ì—”ë“œí¬ì¸íŠ¸

### ì£¼ìš” API

| Category | Method | Endpoint | Description |
|----------|--------|----------|-------------|
| **Dictionary** | GET | `/api/v1/dictionaries` | ì‚¬ì „ ëª©ë¡ ì¡°íšŒ |
| | GET | `/api/v1/dictionaries/{id}` | ì‚¬ì „ ìƒì„¸ ì¡°íšŒ |
| | POST | `/api/v1/dictionaries` | ì‚¬ì „ ìƒì„± |
| | PUT | `/api/v1/dictionaries/{id}` | ì‚¬ì „ ìˆ˜ì • |
| | GET | `/api/v1/dictionaries/search` | ì‚¬ì „ ê²€ìƒ‰ |
| **Chat** | WS | `/ws` | WebSocket ì—°ê²° |
| | GET | `/api/v1/chat/messages` | ì±„íŒ… ê¸°ë¡ ì¡°íšŒ |
| **Admin** | POST | `/api/v1/admin/signin` | ê´€ë¦¬ì ë¡œê·¸ì¸ |
| | GET | `/api/v1/admin/blacklist` | ì°¨ë‹¨ ëª©ë¡ ì¡°íšŒ |
| **Image** | POST | `/api/v1/images` | ì´ë¯¸ì§€ ì—…ë¡œë“œ |

ì „ì²´ API ë¬¸ì„œëŠ” ì„œë²„ ì‹¤í–‰ í›„ http://localhost:8080/docs/index.html ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ğŸ“Š ëª¨ë‹ˆí„°ë§

### ëª¨ë‹ˆí„°ë§ ìŠ¤íƒ ì‹¤í–‰

```bash
cd ./server/monitoring
docker-compose up -d
```

### ì ‘ì† URL

- **Prometheus**: http://localhost:9090
- **Grafana**: http://localhost:3000 (admin/openmpy)
- **Spring Actuator**: http://localhost:8080/actuator

### ì£¼ìš” ë©”íŠ¸ë¦­

- JVM ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ë° GC í†µê³„
- HTTP ìš”ì²­ í†µê³„ (ì‘ë‹µ ì‹œê°„, ì„±ê³µ/ì‹¤íŒ¨ìœ¨)
- ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í’€ ìƒíƒœ

## ğŸ§ª í…ŒìŠ¤íŠ¸

### ë°±ì—”ë“œ í…ŒìŠ¤íŠ¸

```bash
cd server

# ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
./gradlew test
```

### ì»¤ë°‹ ë©”ì‹œì§€ ì»¨ë²¤ì…˜

- `feat`: ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€
- `fix`: ë²„ê·¸ ìˆ˜ì •
- `docs`: ë¬¸ì„œ ìˆ˜ì •
- `style`: ì½”ë“œ í¬ë§·íŒ…, ì„¸ë¯¸ì½œë¡  ëˆ„ë½ ë“±
- `refactor`: ì½”ë“œ ë¦¬íŒ©í† ë§
- `test`: í…ŒìŠ¤íŠ¸ ì¶”ê°€ ë˜ëŠ” ìˆ˜ì •
- `chore`: ë¹Œë“œ ì—…ë¬´, íŒ¨í‚¤ì§€ ë§¤ë‹ˆì € ì„¤ì • ë“±

### ì½”ë“œ ìŠ¤íƒ€ì¼

- **Java**: Intellij Java Wooteco Style Guide
- **JavaScript**: Airbnb JavaScript Style Guide
- **Git**: Conventional Commits

## ğŸ”— ê´€ë ¨ ë§í¬

- [í´ë¼ì´ì–¸íŠ¸ ë¬¸ì„œ](./client/README.md)
- [ì„œë²„ ë¬¸ì„œ](./server/README.md)
- [API ë¬¸ì„œ](http://localhost:8080/docs/index.html)
